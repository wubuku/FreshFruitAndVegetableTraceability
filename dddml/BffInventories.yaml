# 库存相关
valueObjects:
  BffInventoryItemDto:
    metadata:
      JpaProjectionInterfaceName: BffInventoryItemProjection
      #JpaProjectionPropertyTypes:
      #CreatedAt: java.time.Instant
      #ReceivedAt: java.time.Instant
    properties:
      InventoryItemId:
        type: id
      ProductId:
        type: id
      ProductName:
        type: name
      SupplierId:
        type: id
      SupplierShortName:
        type: name
      FacilityId:
        type: id
      LotId:
        type: id
      LocationSeqId:
        type: id
      Comments:
        type: comment
      QuantityOnHandTotal:
        type: fixed-point
      CreatedAt:
        type: date-time
      Details:
        itemType: BffInventoryItemDetailDto
        isList: true


  BffRawItemInventoryGroupDto:
    metadata:
      JpaProjectionInterfaceName: BffRawItemInventoryGroupProjection
    properties:
      ProductId:
        type: id
      ProductName:
        type: name
      QuantityUomId:
        type: id
      SupplierId:
        type: id
      SupplierName:
        type: name
      FacilityId:
        type: id
      FacilityName:
        type: name
      QuantityOnHandTotal:
        type: fixed-point

  BffWipInventoryGroupDto:
    metadata:
      JpaProjectionInterfaceName: BffWipInventoryGroupProjection
    properties:
      ProductId:
        type: id
      ProductName:
        type: name
      QuantityUomId:
        type: id
      FacilityId:
        type: id
      FacilityName:
        type: name
      QuantityOnHandTotal:
        type: fixed-point

  BffInventoryItemDetailDto:
    metadata:
      JpaProjectionInterfaceName: BffInventoryItemDetailProjection
    properties:
      InventoryItemId:
        type: id
      InventoryItemDetailSeqId:
        # RawItem Id
        type: id
      EffectiveDate:
        type: date-time
      QuantityOnHandDiff:
        type: fixed-point
      ShipmentId:
        type: id
      ReceiptId:
        type: id
      PhysicalInventoryId:
        type: id
      Description:
        type: description
      InventoryTransferId:
        type: id

services:
  BffInventoryItemService:
    restfulResourceName: BffInventoryItems
    methods:
      GetInventoryItems:
        restfulResourceName: "RawItems"
        metadata:
          IsPageable: true
          ReturnPageEnvelope: true
        isQuery: true
        parameters:
          #          ProductTypeId:
          #            type: id
          #            optional: false # Required
          ProductName:
            type: name
            optional: true # NOT required
          SupplierId:
            type: id
            optional: true # NOT required
          ProductId:
            type: id
            optional: true # NOT required
          FacilityId:
            type: id
            optional: true # NOT required
        result:
          itemType: BffRawItemInventoryGroupDto