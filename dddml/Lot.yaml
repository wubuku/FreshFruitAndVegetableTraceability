aggregates:
  Lot:
    id:
      name: LotId
      type: id
    # reservedPropertyMetadata:
    #   noActive: true
    #   active:
    #     name: "__Active__"

    properties:
      Quantity:
        type: fixed-point
      ExpirationDate:
        type: date-time
      #BestIfUsedByDate:
      #  type: KdeDate
      #  description: "AI (15) Best if Used by Date"
      LotIdentifications:
        itemType: LotIdentification
      Active:
        type: indicator
      Gtin:
        type: id
        # description: "AI (01) Case GTIN"
      Gs1Batch:
        description: "GS1 BATCH (AI=10)"
        type: id
      # CaseBatch:
      #   type: KdeBatch
      #   description: "AI (10) Case Batch/Lot"
      #   # Use for Traceability Lot Code (TLC)
      SourceFacilityId:
        type: id
        description: "The facility (location) where TLC was assigned during initial packing or transformation"
      InternalId:
        type: id
      # ---------------------------------------------------------------------
      PalletSscc:
        type: SSCC
        # description: "AI (00) Pallet SSCC"
        # use for Traceability Lot Code (TLC)
      PackDate:
        type: date-time
        # description: "AI (13) Pack Date"
        # use for Traceability Lot Code (TLC)
      HarvestDate:
        type: date-time
        # description: "AI (13) Harvest Date"
        # use for Traceability Lot Code (TLC)
      SerialNumber:
        type: id-long
        # description: "AI (21) Serial Number"
        # use for Traceability Lot Code (TLC)
      # ---------------------------------------------------------------------

    entities:
      LotIdentification:
        id:
          name: LotIdentificationTypeId
          type: id
        globalId:
          name: LotIdentificationId
          type: LotIdentificationId
          columnNames:
            - lot_id
            - lot_identification_type_id
        properties:
          IdValue:
            type: id-long
          # ---------------------------------------------------------------------
          # 以下属性可用于将 TLC Case GTIN/BATCH 映射到 LotId。
          # 此时，Id Value 的格式可以为 `(01){Gtin}(10){GS1 Batch}`
          # TLC：Traceability Lot Code。
          Gtin:
            type: id
          Gs1Batch:
            type: id
          # ---------------------------------------------------------------------
          # SourceFacilityId:
          #   type: id



  LotIdentificationType:
    id:
      name: LotIdentificationTypeId
      type: id
    properties:
      Description:
        type: description
